<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hy.salon.basic.dao" >


    <select id="GET_PRODUCT_LIST"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.entity.Product">

     SELECT * FROM salon.product WHERE salon_id=#{salonId};

    </select>



    <select id="GET_PRODUCT_BY_STATUS"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.vo.StockTransferApplicationVo">

        SELECT
            a.record_id,
            a.application_no,
            a.out_warehouse_id,
            a.remark_application,
            a.remark_audit,
            a.record_status,
            a.record_id,
            b.qty,
            b.stock_transfer_application_id,
            b.product_id,
            c.salon_id,
            c.product_name,
            c.product_class,
            c.product_series_id,
            c.price_market,
            c.price
        FROM
            `stock_transfer_application` a
        LEFT JOIN stock_transfer_application_item b on a.record_id = b.stock_transfer_application_id
        LEFT JOIN product c ON b.product_id=c.record_id
        where a.record_status=#{recordStatus};

    </select>
    <select id="GET_PRODUCT_BY_TYPE"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.vo.ProductStockMovementVo">

        select
              a.*,
              b.salon_id,
              b.product_name,
              b.product_class,
              b.product_series_id,
              b.price_market,
              b.price,
              b.product_code,
              b.specification,
              b.specification_unit,
              b.product_unit_id,
              b.bar_code,
              b.shelf_life,
              b.day_of_pre_warning,
              b.stock_of_pre_warning,
              b.record_status,
              b.description,
              c.stock_qty,
              c.cost
        from
              product_stock_movement a
        LEFT JOIN product b on a.product_id=b.record_id
        LEFT JOIN product_stock c on a.product_id=c.product_id
        where a.movement_type=#{movementType}
        and a.create_date between #{cTime} and #{eTime};
    </select>



    <select id="GET_SERVICE_FOR_SUIT"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.vo.ServiceVo">

     SELECT ss.*,sss.times,sss.service_id,sss.service_suite_id FROM salon.service as ss left join salon.service_suite_item as sss on ss.record_id= sss.service_id
      where sss.service_suite_id= #{id};

    </select>


    <select id="GET_BIN_SERVICE_SERIES_FOR_PARENTId"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.vo.ServiceSeriesVo">

    SELECT sss.*,svsi.record_id FROM salon.service_series as sss left join salon.vip_suite_item as svsi on sss.record_id = svsi.item_id
    where sss.parent_id= #{parentId} and svsi.record_type = #{recordType} and svsi.vip_suite_id = #{vipSuiteId};

    </select>


    <select id="GET_SERVICE_SERIES_FOR_PARENTId"  parameterType="java.util.Map" resultMap="com.hy.salon.basic.vo.ServiceSeriesVo">

    SELECT * FROM salon.service_series where parent_id= #{parentId};

    </select>


    <select id="GET_PRODUCT_FOR_SERIES"  parameterType="java.util.Map" resultType="java.util.Map">

   SELECT * FROM salon.product_series left join salon.product on product_series.record_id = product.product_series_id
    where product_series.series_name = #{seriesName} and product.salon_id = #{salonId};

    </select>

    <select id="GET_STUFF_NAME"  parameterType="java.util.Map" resultType="com.hy.salon.basic.vo.StuffVo">
        select
            a.job_name
        from job a
        LEFT JOIN stuff_job b on a.record_id=b.job_id
        where b.stuff_id=#{stuffId};
    </select>


</mapper>